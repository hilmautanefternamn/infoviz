<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">

<meta charset="utf-8">

<!-- Load d3.js -->
<script src="./lib/d3/d3.min.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>

<!-- map stuffs -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<!-- slider stuff -->
<script src="https://unpkg.com/d3-simple-slider"></script>

<!-- Load color palettes -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<!--dunno if we want tha brewer-->
<script src="./lib/colorbrewer/colorbrewer.js" type='text/javascript'></script> 

<!-- Load js modules -->
<script src="heatmap.js" type='text/javascript'></script>
<script src="choropleth.js" type='text/javascript'></script>

<!-- Load stylesheets & fonts-->
<link rel="stylesheet" href="main.css">
<link href="https://fonts.googleapis.com/css?family=Raleway|Simonetta&display=swap" rel="stylesheet">


<body>
  <div id="header">
    <div id="background"></div>
    <div id="foreground">
      <h1>Cause of death</h1>
      <h4>A study of what is causing casualties in Sweden throughout the years of 1997-2018, considering different age groups.</h4>
    </div>
  </div>

  <div id="colorRange">
    <img src="https://raw.githubusercontent.com/d3/d3-scale-chromatic/master/img/Greys.png", height="30px" width="100%">
    <div id="rangeAxis" class="fulljustify"></div>
  </div>


  <!-- Create divs where the graphs will take place -->
  <div id="valueBox">
    <p id="exact-value"></p> <!--"exact value of this cell is: "-->
  </div>
  <div id="heatmaps"> <!-- container for flex -->
    <div id="disease"></div>
    <div id="violence"></div>
    <div id="mental_illness"></div>
    <div id="traffic"></div>
  </div>

  <!-- Create an element where the map will take place -->
  <div id="mapView">  <!-- container for flex -->
    <div id="choroMap"></div>

    <!-- Create an element where the slider to the map will take place -->
    <div id="slider">
      <p id="current-slider-value"></p>
      <div id="slider-vertical"></div>
    </div>
  </div>

</body>


<!-- create heatmaps -->
<script>
  // set url to data
  var data1 = "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/heatmap_data.csv";


// range axis
d3.csv(data1, function(data) 
{  

  // parse values strings to floats
  var values = d3.map(data, function(d){return d.value;}).keys(); 
  for(var i = 0; i < values.length; ++i)
  {
    values[i] = parseFloat(values[i]);
  }

  // map [min, max] to [0,width]
  var rangeX = d3.scaleLinear()
    .range([0, window.innerWidth*0.7])
    .domain( [Math.min(...values), Math.max(...values)] )
  var axis = d3.select("#rangeAxis").append("text")
    .style("font-size", 15)
    .call(d3.axisBottom(rangeX))
    .select(".domain").remove();


    //console.log(values)
    //console.log(Math.min(...values))
    //console.log(Math.max(...values))
    //console.log( ( d3.map(data, function(d){return d.value;}).keys() ))
})

  // create 4 heat maps
  // args:    cause of death,   dataset,    colorrange 
  addHeatMap("disease", data1, d3.interpolateBlues);
  addHeatMap("violence", data1, d3.interpolateGreens);
  addHeatMap("mental_illness", data1, d3.interpolatePurples);
  addHeatMap("traffic", data1, d3.interpolateReds);

  createSlider();
  createChoropleth("choroMap");
  

</script>




